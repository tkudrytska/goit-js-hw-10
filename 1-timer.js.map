{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nclass Timer {\n    constructor({ onTick }) {\n        this.intervalId = null;\n        this.isActive = false;\n        this.onTick = onTick;\n\n        this.init();\n    }\n\n    init() {\n        const ms = this.convertMs(0);\n        this.onTick(ms);\n    }\n\n    start() {\n        if (this.isActive) return;\n\n        const startTime = userSelectedDate.getTime();\n\n        this.intervalId = setInterval(() => {\n            this.isActive = true;\n            const currentTime = Date.now();\n            const deltaTime = startTime - currentTime;\n\n            if (deltaTime <= 0) {\n                this.stop();\n                return;\n            }\n\n            const ms = this.convertMs(deltaTime);\n            this.onTick(ms);\n        }, 1000);\n\n        startBtn.disabled = true;\n        input.disabled = true;\n    }\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.isActive = false;\n        startBtn.disabled = false;\n        input.disabled = false;\n    }\n\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    }\n};\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"button[data-start]\");\nconst dataDays = document.querySelector(\"span[data-days]\");\nconst dataHours = document.querySelector(\"span[data-hours]\");\nconst dataMinutes = document.querySelector(\"span[data-minutes]\");\nconst dataSeconds = document.querySelector(\"span[data-seconds]\");\nstartBtn.disabled = true;\nlet userSelectedDate = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        validateSelectedDate();\n    },\n};\n\nflatpickr(input, options);\n\nfunction validateSelectedDate() {\n    if (userSelectedDate.getTime() < Date.now()) {\n        startBtn.disabled = true;\n        iziToast.show({\n            message: 'Please choose a date in the future',\n            messageSize: '20',\n            theme: 'dark',\n            color: 'red',\n            position: `topRight`,\n        });\n    } else {\n        startBtn.disabled = false;\n    }\n};\n\nconst timer = new Timer({\n    onTick: updateClockface,\n});\n\nstartBtn.addEventListener('click', timer.start.bind(timer));\n\nfunction updateClockface({days, hours, minutes, seconds}) {\n    dataDays.textContent = String(days);\n    dataHours.textContent = String(hours).padStart(2, `0`);\n    dataMinutes.textContent = String(minutes).padStart(2, `0`);\n    dataSeconds.textContent = String(seconds).padStart(2, `0`);\n};\n"],"names":["Timer","onTick","ms","startTime","userSelectedDate","currentTime","deltaTime","startBtn","input","days","hours","minutes","seconds","dataDays","dataHours","dataMinutes","dataSeconds","options","selectedDates","validateSelectedDate","flatpickr","iziToast","timer","updateClockface"],"mappings":"+IAMA,MAAMA,CAAM,CACR,YAAY,CAAE,OAAAC,GAAU,CACpB,KAAK,WAAa,KAClB,KAAK,SAAW,GAChB,KAAK,OAASA,EAEd,KAAK,KAAI,CACZ,CAED,MAAO,CACH,MAAMC,EAAK,KAAK,UAAU,CAAC,EAC3B,KAAK,OAAOA,CAAE,CACjB,CAED,OAAQ,CACJ,GAAI,KAAK,SAAU,OAEnB,MAAMC,EAAYC,EAAiB,UAEnC,KAAK,WAAa,YAAY,IAAM,CAChC,KAAK,SAAW,GAChB,MAAMC,EAAc,KAAK,MACnBC,EAAYH,EAAYE,EAE9B,GAAIC,GAAa,EAAG,CAChB,KAAK,KAAI,EACT,MACH,CAED,MAAMJ,EAAK,KAAK,UAAUI,CAAS,EACnC,KAAK,OAAOJ,CAAE,CACjB,EAAE,GAAI,EAEPK,EAAS,SAAW,GACpBC,EAAM,SAAW,EACpB,CAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,GAChBD,EAAS,SAAW,GACpBC,EAAM,SAAW,EACpB,CAED,UAAUN,EAAI,CAMV,MAAMO,EAAO,KAAK,MAAMP,EAAK,KAAG,EAC1BQ,EAAQ,KAAK,MAAOR,EAAK,MAAO,IAAI,EACpCS,EAAU,KAAK,MAAQT,EAAK,MAAO,KAAQ,GAAM,EACjDU,EAAU,KAAK,MAASV,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CACL,CAEA,MAAMJ,EAAQ,SAAS,cAAc,kBAAkB,EACjDD,EAAW,SAAS,cAAc,oBAAoB,EACtDM,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAC/DT,EAAS,SAAW,GACpB,IAAIH,EAAmB,KAEvB,MAAMa,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBd,EAAmBc,EAAc,CAAC,EAClCC,GACH,CACL,EAEAC,EAAUZ,EAAOS,CAAO,EAExB,SAASE,GAAuB,CACxBf,EAAiB,QAAO,EAAK,KAAK,IAAG,GACrCG,EAAS,SAAW,GACpBc,EAAS,KAAK,CACV,QAAS,qCACT,YAAa,KACb,MAAO,OACP,MAAO,MACP,SAAU,UACtB,CAAS,GAEDd,EAAS,SAAW,EAE5B,CAEA,MAAMe,EAAQ,IAAItB,EAAM,CACpB,OAAQuB,CACZ,CAAC,EAEDhB,EAAS,iBAAiB,QAASe,EAAM,MAAM,KAAKA,CAAK,CAAC,EAE1D,SAASC,EAAgB,CAAC,KAAAd,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACtDC,EAAS,YAAc,OAAOJ,CAAI,EAClCK,EAAU,YAAc,OAAOJ,CAAK,EAAE,SAAS,EAAG,GAAG,EACrDK,EAAY,YAAc,OAAOJ,CAAO,EAAE,SAAS,EAAG,GAAG,EACzDK,EAAY,YAAc,OAAOJ,CAAO,EAAE,SAAS,EAAG,GAAG,CAC7D"}